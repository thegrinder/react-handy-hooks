{"version":3,"sources":["webpack:///./src/useForm/useForm.js","webpack:///./src/utils/index.js","webpack:///./src/useAccordion/useAccordion.js","webpack:///./src/index.js","webpack:///./src/useForm/useForm.mdx"],"names":["useForm","_ref","initialValues","validate","onSubmit","_useState2","_slicedToArray","useState","values","updateValues","_useState4","errors","updateErrors","_useState6","touched","updateTouched","runValidation","formValues","useEffect","invalid","Object","keys","length","pristine","equal","getFieldProps","name","error","value","onChange","e","newValues","_objectSpread","_defineProperty","target","onBlur","handleSubmit","preventDefault","resetForm","mod","x","n","keyCodesToKey","13","27","32","37","38","39","40","isKey","key","event","eventKey","keyCode","isArrowDown","isArrowUp","useAccordion","headersRefs","useRef","current","getHeaderRef","index","node","splice","sectionsRefs","getSectionRef","useAccordion_slicedToArray","activeSections","updateActiveSections","isActiveSection","includes","getSectionStyle","sectionRef","baseStyle","overflow","transition","useAccordion_objectSpread","height","concat","clientHeight","cursorPosition","updateCursorPosition","getOnClick","prevSections","filter","i","toggleAccordionSection","focusOnHeader","nextCursorPosition","headerRef","focus","getOnFocus","getLinkingId","id","onKeyDown","getHeaderProps","aria-controls","aria-disabled","aria-expanded","onClick","onFocus","ref","getSectionProps","aria-hidden","aria-labelledby","role","style","__webpack_require__","d","__webpack_exports__","src_useForm_useForm","src_useAccordion_useAccordion","MDXContent","props","_this","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","call","layout","React","Component","_this$props","components","_objectWithoutProperties","react__WEBPACK_IMPORTED_MODULE_0___default","a","createElement","_mdx_js_tag__WEBPACK_IMPORTED_MODULE_1__","docz__WEBPACK_IMPORTED_MODULE_2__","__position","__code","__scope","Input","color","alert","JSON","stringify","_useForm","_getFieldProps","disabled"],"mappings":"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","file":"static/js/src-use-form-use-form.9175ea94.js","sourcesContent":["import { useState, useEffect } from 'react';\nimport equal from 'fast-deep-equal';\n\nconst useForm = ({ initialValues, validate, onSubmit }) => {\n  const [values, updateValues] = useState(initialValues);\n  const [errors, updateErrors] = useState({});\n  const [touched, updateTouched] = useState({});\n\n  const runValidation = (formValues) => {\n    if (validate) {\n      updateErrors(validate(formValues));\n    }\n  };\n\n  useEffect(() => {\n    runValidation(values);\n  }, []);\n\n  const invalid = !!Object.keys(errors).length;\n\n  const pristine = equal(initialValues, values);\n\n  const getFieldProps = name => ({\n    error: errors[name],\n    touched: !!touched[name],\n    value: values[name],\n    onChange(e) {\n      const newValues = { ...values, [name]: e.target.value };\n      updateValues(newValues);\n      runValidation(newValues);\n    },\n    onBlur() {\n      updateTouched({ ...touched, [name]: true });\n    },\n  });\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    if (!invalid && onSubmit) {\n      onSubmit(values);\n    }\n  }\n\n  const resetForm = () => {\n    updateValues(initialValues);\n    updateErrors({});\n    updateTouched({});\n  };\n\n  return {\n    getFieldProps,\n    invalid,\n    pristine,\n    handleSubmit,\n    resetForm,\n  };\n};\n\nexport default useForm;\n","export const mod = (x, n) => ((x % n) + n) % n;\n\nconst keyCodesToKey = {\n  13: 'Enter',\n  27: 'Escape',\n  32: ' ',\n  37: 'ArrowLeft',\n  38: 'ArrowUp',\n  39: 'ArrowRight',\n  40: 'ArrowDown',\n};\n\nexport const isKey = key => (event) => {\n  const eventKey = event.key || keyCodesToKey[event.keyCode];\n  return key === eventKey;\n};\n\nexport const isArrowDown = isKey('ArrowDown');\nexport const isArrowUp = isKey('ArrowUp');\nexport const isArrowLeft = isKey('ArrowLeft');\nexport const isArrowRight = isKey('ArrowRight');\nexport const isEnter = isKey('Enter');\nexport const isEscape = isKey('Escape');\nexport const isSpace = isKey(' ');\n","import { useRef, useState } from 'react';\nimport { mod, isArrowDown, isArrowUp } from '../utils';\n\nconst useAccordion = () => {\n  const headersRefs = useRef([]).current;\n\n  const getHeaderRef = index => (node) => {\n    if (node === null) {\n      headersRefs.splice(index, 1);\n    } else {\n      headersRefs[index] = node;\n    }\n  };\n\n  const sectionsRefs = useRef([]).current;\n\n  const getSectionRef = index => (node) => {\n    if (node === null) {\n      sectionsRefs.splice(index, 1);\n    } else {\n      sectionsRefs[index] = node;\n    }\n  };\n\n  const [activeSections, updateActiveSections] = useState([]);\n\n  const isActiveSection = index => activeSections.includes(index);\n\n  const getSectionStyle = (index) => {\n    const sectionRef = sectionsRefs[index];\n    const baseStyle = {\n      overflow: 'hidden',\n      transition: 'height 200ms linear',\n    };\n    if (!sectionRef || !isActiveSection(index)) {\n      return { ...baseStyle, height: '0px' };\n    }\n    return { ...baseStyle, height: `${sectionRef.clientHeight}px` };\n  };\n\n  const toggleAccordionSection = index => (\n    updateActiveSections(prevSections => (\n      prevSections.includes(index)\n        ? prevSections.filter(i => i !== index)\n        : prevSections.concat(index)\n    ))\n  );\n\n  const [cursorPosition, updateCursorPosition] = useState(-1);\n\n  const getOnClick = index => () => {\n    updateCursorPosition(index);\n    toggleAccordionSection(index);\n  };\n\n  const focusOnHeader = (nextCursorPosition) => {\n    const headerRef = headersRefs[nextCursorPosition];\n    if (headerRef) {\n      headerRef.focus();\n    }\n  };\n\n  const getOnFocus = index => () => updateCursorPosition(index);\n\n  const getLinkingId = id => `${id}-tab`;\n\n  const onKeyDown = (e) => {\n    const { length } = headersRefs;\n    if (isArrowUp(e)) {\n      e.preventDefault();\n      const nextCursorPosition = mod(cursorPosition - 1, length);\n      updateCursorPosition(nextCursorPosition);\n      focusOnHeader(nextCursorPosition);\n    } else if (isArrowDown(e)) {\n      e.preventDefault();\n      const nextCursorPosition = mod(cursorPosition + 1, length);\n      updateCursorPosition(nextCursorPosition);\n      focusOnHeader(nextCursorPosition);\n    }\n  };\n\n  const getHeaderProps = (id, index) => ({\n    'aria-controls': getLinkingId(id),\n    'aria-disabled': isActiveSection(index),\n    'aria-expanded': isActiveSection(index),\n    id,\n    key: id,\n    onClick: getOnClick(index),\n    onFocus: getOnFocus(index),\n    onKeyDown,\n    ref: getHeaderRef(index),\n  });\n\n  const getSectionProps = (id, index) => ({\n    'aria-hidden': !isActiveSection(index),\n    'aria-labelledby': id,\n    id: getLinkingId(id),\n    key: getLinkingId(id),\n    ref: getSectionRef(index),\n    role: 'region',\n    style: getSectionStyle(index),\n  });\n\n  return {\n    getHeaderProps,\n    getSectionProps,\n    isActiveSection,\n  };\n};\n\nexport default useAccordion;\n","import useForm from './useForm/useForm';\nimport useAccordion from './useAccordion/useAccordion';\n\nexport {\n  useForm,\n  useAccordion,\n};\n","\n  import React from 'react'\n  import { MDXTag } from '@mdx-js/tag'\n  import { Playground } from 'docz';\nimport { useForm } from '../';\n\nconst layoutProps = {\n  \n};\nexport default class MDXContent extends React.Component {\n  constructor(props) {\n    super(props)\n    this.layout = null\n  }\n  render() {\n    const { components, ...props } = this.props\n\n    return <MDXTag\n             name=\"wrapper\"\n             \n             components={components}><MDXTag name=\"h2\" components={components} props={{\"id\":\"useform\"}}>{`useForm`}</MDXTag>\n\n<Playground __position={0} __code={'() => {\\n  const Input = ({ error, touched, value, onChange, onBlur }) => (\\n    <div>\\n      <input onChange={onChange} onBlur={onBlur} value={value} />\\n      <div>\\n        {touched && error && <span style={{ color: \\'red\\' }}>{error}</span>}\\n      </div>\\n    </div>\\n  )\\n  const validate = values => {\\n    let errors = {}\\n    if (values.name === \\'\\') {\\n      errors.name = \\'required\\'\\n    }\\n    return errors\\n  }\\n\\n  const initialValues = {\\n    name: \\'\\',\\n  }\\n\\n  const onSubmit = values => {\\n    alert(JSON.stringify(values))\\n  }\\n\\n  const Example = () => {\\n    const { pristine, invalid, getFieldProps, handleSubmit } = useForm({\\n      initialValues,\\n      validate,\\n      onSubmit,\\n    })\\n    const { error, touched, value, onChange, onBlur } = getFieldProps(\\'name\\')\\n    return (\\n      <form onSubmit={handleSubmit}>\\n        <Input\\n          error={error}\\n          touched={touched}\\n          value={value}\\n          onChange={onChange}\\n          onBlur={onBlur}\\n        />\\n        <div>\\n          <button disabled={pristine || invalid}>submit</button>\\n        </div>\\n      </form>\\n    )\\n  }\\n\\n  return <Example />\\n}'} __scope={{props: this ? this.props : props,useForm}}>\n  {() => {\n    const Input = ({ error, touched, value, onChange, onBlur }) => (\n      <div>\n        <input \n          onChange={onChange} \n          onBlur={onBlur} \n          value={value}\n        />\n        <div>\n          {touched && error && <span style={{ color: 'red' }}>{error}</span>}\n        </div>\n      </div>\n    );\nconst validate = (values) => {\n  let errors = {};\n  if (values.name === '') {\n    errors.name = 'required';\n  }\n  return errors;\n};\n\nconst initialValues = {\n  name: '',\n};\n\nconst onSubmit = values => {\n  alert(JSON.stringify(values));\n};\n\nconst Example = () => {\n  const { pristine, invalid, getFieldProps, handleSubmit } = useForm({\n    initialValues,\n    validate,\n    onSubmit,\n  });\n  const { error, touched, value, onChange, onBlur } = getFieldProps('name');\n  return (\n    <form onSubmit={handleSubmit}>\n      <Input \n        error={error} \n        touched={touched} \n        value={value} \n        onChange={onChange} \n        onBlur={onBlur} \n      />\n      <div>\n        <button disabled={pristine || invalid}>submit</button>\n      </div>\n    </form>\n  );\n};\n\nreturn <Example />\n  }}\n</Playground>\n           </MDXTag>\n  }\n}\n  "],"sourceRoot":""}