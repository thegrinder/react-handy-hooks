(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"./src/index.js":function(e,t,n){"use strict";var i=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread.js"),a=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),c=n("./node_modules/react/index.js"),o=n("./node_modules/fast-deep-equal/index.js"),s=n.n(o),u=function(e){var t=e.initialValues,n=e.validate,o=e.onSubmit,u=e.submitting,l=void 0!==u&&u,b=Object(c.useState)(t),d=Object(a.a)(b,2),f=d[0],j=d[1],m=Object(c.useState)({}),p=Object(a.a)(m,2),O=p[0],v=p[1],g=Object(c.useState)({}),h=Object(a.a)(g,2),_=h[0],y=h[1],x=function(e){n&&v(n(e))};Object(c.useEffect)(function(){x(f)},[]);var E=!!Object.keys(O).length,N=s()(t,f);return{getFieldProps:function(e){return{submitting:l,error:O[e],touched:!!_[e],value:f[e],onChange:function(t){var n=Object(r.a)({},f,Object(i.a)({},e,t.target.value));j(n),x(n)},onBlur:function(){y(Object(r.a)({},_,Object(i.a)({},e,!0)))}}},invalid:E,pristine:N,handleSubmit:function(e){e.preventDefault(),!E&&o&&o(f)},resetForm:function(){j(t),v({}),y({})}}},l=u;u&&u===Object(u)&&Object.isExtensible(u)&&Object.defineProperty(u,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useForm",filename:"src/useForm/useForm.js"}});var b=function(e,t){return(e%t+t)%t};b&&b===Object(b)&&Object.isExtensible(b)&&Object.defineProperty(b,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"mod",filename:"src/utils/index.js"}});var d={13:"Enter",27:"Escape",32:" ",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown"},f=function(e){return function(t){var n=t.key||d[t.keyCode];return e===n}};f&&f===Object(f)&&Object.isExtensible(f)&&Object.defineProperty(f,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"isKey",filename:"src/utils/index.js"}});var j=f("ArrowDown");"undefined"!==typeof j&&j&&j===Object(j)&&Object.isExtensible(j)&&Object.defineProperty(j,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"isArrowDown",filename:"src/utils/index.js"}});var m=f("ArrowUp");"undefined"!==typeof m&&m&&m===Object(m)&&Object.isExtensible(m)&&Object.defineProperty(m,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"isArrowUp",filename:"src/utils/index.js"}});var p=f("ArrowLeft");"undefined"!==typeof p&&p&&p===Object(p)&&Object.isExtensible(p)&&Object.defineProperty(p,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"isArrowLeft",filename:"src/utils/index.js"}});var O=f("ArrowRight");"undefined"!==typeof O&&O&&O===Object(O)&&Object.isExtensible(O)&&Object.defineProperty(O,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"isArrowRight",filename:"src/utils/index.js"}});var v=f("Enter");"undefined"!==typeof v&&v&&v===Object(v)&&Object.isExtensible(v)&&Object.defineProperty(v,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"isEnter",filename:"src/utils/index.js"}});var g=f("Escape");"undefined"!==typeof g&&g&&g===Object(g)&&Object.isExtensible(g)&&Object.defineProperty(g,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"isEscape",filename:"src/utils/index.js"}});var h=f(" ");"undefined"!==typeof h&&h&&h===Object(h)&&Object.isExtensible(h)&&Object.defineProperty(h,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"isSpace",filename:"src/utils/index.js"}});var _=function(){var e=Object(c.useRef)([]).current,t=function(t){return function(n){null===n?e.splice(t,1):e[t]=n}},n=Object(c.useRef)([]).current,i=function(e){return function(t){null===t?n.splice(e,1):n[e]=t}},o=Object(c.useState)([]),s=Object(a.a)(o,2),u=s[0],l=s[1],d=function(e){return u.includes(e)},f=function(e){var t=n[e],i={overflow:"hidden",transition:"height 200ms linear"};return t&&d(e)?Object(r.a)({},i,{height:"".concat(t.clientHeight,"px")}):Object(r.a)({},i,{height:"0px"})},p=Object(c.useState)(-1),O=Object(a.a)(p,2),v=O[0],g=O[1],h=function(e){return function(){g(e),function(e){l(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):t.concat(e)})}(e)}},_=function(t){var n=e[t];n&&n.focus()},y=function(e){return function(){return g(e)}},x=function(e){return"".concat(e,"-tab")},E=function(t){var n=e.length;if(m(t)){t.preventDefault();var i=b(v-1,n);g(i),_(i)}else if(j(t)){t.preventDefault();var r=b(v+1,n);g(r),_(r)}};return{getHeaderProps:function(e,n){return{"aria-controls":x(e),"aria-disabled":d(n),"aria-expanded":d(n),id:e,key:e,onClick:h(n),onFocus:y(n),onKeyDown:E,ref:t(n)}},getSectionProps:function(e,t){return{"aria-hidden":!d(t),"aria-labelledby":e,id:x(e),key:x(e),ref:i(t),role:"region",style:f(t)}},isActiveSection:d}},y=_;_&&_===Object(_)&&Object.isExtensible(_)&&Object.defineProperty(_,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useAccordion",filename:"src/useAccordion/useAccordion.js"}});var x=function(){var e={LOADING:"".concat("useRequest","/LOADING"),SUCCEEDED:"".concat("useRequest","/SUCCEEDED"),FAILED:"".concat("useRequest","/FAILED")},t=function(){return{type:e.LOADING}},n=function(){return{data:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},type:e.SUCCEEDED}},i=function(t){return{error:t,type:e.FAILED}},o=Object(c.useReducer)(function(t,n){switch(n.type){case e.LOADING:return Object(r.a)({},t,{error:null,loading:!0,succeeded:!1});case e.SUCCEEDED:return Object(r.a)({},t,{loading:!1,succeeded:!0,initialLoad:!1,data:n.data});case e.FAILED:return Object(r.a)({},t,{loading:!1,initialLoad:!1,error:n.error});default:return t}},{loading:!1,initialLoad:!0,succeeded:!1,error:null,data:{}}),s=Object(a.a)(o,2),u=s[0],l=s[1];return{state:u,actions:{loading:function(){return l(t())},succeeded:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l(n(e))},failed:function(e){return l(i(e))}}}},E=x;x&&x===Object(x)&&Object.isExtensible(x)&&Object.defineProperty(x,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useRequest",filename:"src/useRequest/useRequest.js"}}),n.d(t,"b",function(){return l}),n.d(t,"a",function(){return y}),n.d(t,"c",function(){return E}),"undefined"!==typeof E&&E&&E===Object(E)&&Object.isExtensible(E)&&Object.defineProperty(E,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useRequest",filename:"src/index.js"}}),"undefined"!==typeof y&&y&&y===Object(y)&&Object.isExtensible(y)&&Object.defineProperty(y,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useAccordion",filename:"src/index.js"}}),"undefined"!==typeof l&&l&&l===Object(l)&&Object.isExtensible(l)&&Object.defineProperty(l,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useForm",filename:"src/index.js"}})},"./src/useRequest/useRequest.mdx":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return b});var i,r=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/extends.js"),a=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),c=(n("./node_modules/react/index.js"),n("./node_modules/@mdx-js/react/dist/index.es.js")),o=n("./node_modules/docz/dist/index.esm.js"),s=n("./src/index.js"),u=(i="UseRequestDemo",{}),l="wrapper";function b(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(c.b)(l,Object(r.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(c.b)("h1",{id:"userequest"},"useRequest"),Object(c.b)("p",null,"useRequest is a hook that is designed to handle request state. It uses ",Object(c.b)("inlineCode",{parentName:"p"},"useReducer")," under the hood and returns state and three actions to update it."),Object(c.b)("h2",{id:"state"},"state"),Object(c.b)("p",null,"The return state has the following properties"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"loading"),Object(c.b)("li",{parentName:"ul"},"initialLoad"),Object(c.b)("li",{parentName:"ul"},"succeeded"),Object(c.b)("li",{parentName:"ul"},"error"),Object(c.b)("li",{parentName:"ul"},"data")),Object(c.b)("h2",{id:"actions"},"actions"),Object(c.b)("h3",{id:"loading"},"loading"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"flips ",Object(c.b)("inlineCode",{parentName:"li"},"loading")," to ",Object(c.b)("inlineCode",{parentName:"li"},"true")),Object(c.b)("li",{parentName:"ul"},"flips ",Object(c.b)("inlineCode",{parentName:"li"},"succeeded")," to ",Object(c.b)("inlineCode",{parentName:"li"},"false")),Object(c.b)("li",{parentName:"ul"},"resets ",Object(c.b)("inlineCode",{parentName:"li"},"error")," to ",Object(c.b)("inlineCode",{parentName:"li"},"null"))),Object(c.b)("h3",{id:"succeeded"},"succeeded"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"flips ",Object(c.b)("inlineCode",{parentName:"li"},"loading")," to ",Object(c.b)("inlineCode",{parentName:"li"},"false")),Object(c.b)("li",{parentName:"ul"},"flips ",Object(c.b)("inlineCode",{parentName:"li"},"succeeded")," to ",Object(c.b)("inlineCode",{parentName:"li"},"true")),Object(c.b)("li",{parentName:"ul"},"flips ",Object(c.b)("inlineCode",{parentName:"li"},"initialLoad")," to ",Object(c.b)("inlineCode",{parentName:"li"},"false")),Object(c.b)("li",{parentName:"ul"},"populates ",Object(c.b)("inlineCode",{parentName:"li"},"data")," with the given argument")),Object(c.b)("h3",{id:"failed"},"failed"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"flips ",Object(c.b)("inlineCode",{parentName:"li"},"loading")," to ",Object(c.b)("inlineCode",{parentName:"li"},"false")),Object(c.b)("li",{parentName:"ul"},"flips ",Object(c.b)("inlineCode",{parentName:"li"},"initialLoad")," to ",Object(c.b)("inlineCode",{parentName:"li"},"false")),Object(c.b)("li",{parentName:"ul"},"populates ",Object(c.b)("inlineCode",{parentName:"li"},"error")," with the given argument")),Object(c.b)("h2",{id:"example"},"Example"),Object(c.b)(o.c,{__position:0,__code:"() => {\n  const UseRequestDemo = () => {\n    const { state, actions } = useRequest()\n    const mockRequest = () =>\n      new Promise((resolve, reject) => {\n        return setTimeout(() => {\n          Math.floor(Math.random() * 2) == 0\n            ? resolve({ response: 'success' })\n            : reject('oops!')\n        }, 1000)\n      })\n\n    const makeRequest = () => {\n      actions.loading()\n      mockRequest()\n        .then(response => actions.succeeded(response))\n        .catch(error => actions.failed(error))\n    }\n\n    return (\n      <div>\n        <button onClick={makeRequest}>make request</button>\n        {state.loading && <div>loading...</div>}\n        {Object.keys(state.data).length !== 0 && (\n          <div>response: {state.data.response}</div>\n        )}\n        {state.error && <div>error: {state.error}</div>}\n      </div>\n    )\n  }\n\n  return <UseRequestDemo />\n}",__scope:{props:this?this.props:n,Playground:o.c,useRequest:s.c},mdxType:"Playground"},function(){return Object(c.b)(function(){var e=Object(s.c)(),t=e.state,n=e.actions;return Object(c.b)("div",null,Object(c.b)("button",{onClick:function(){n.loading(),new Promise(function(e,t){return setTimeout(function(){0==Math.floor(2*Math.random())?e({response:"success"}):t("oops!")},1e3)}).then(function(e){return n.succeeded(e)}).catch(function(e){return n.failed(e)})}},"make request"),t.loading&&Object(c.b)("div",null,"loading..."),0!==Object.keys(t.data).length&&Object(c.b)("div",null,"response: ",t.data.response),t.error&&Object(c.b)("div",null,"error: ",t.error))},{mdxType:"UseRequestDemo"})}))}b&&b===Object(b)&&Object.isExtensible(b)&&Object.defineProperty(b,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"src/useRequest/useRequest.mdx"}}),b.isMDXComponent=!0}}]);
//# sourceMappingURL=src-use-request-use-request.5bcd8b02c554501ef009.js.map