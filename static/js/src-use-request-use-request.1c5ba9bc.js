(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"./src/index.js":function(e,t,n){"use strict";var r=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),a=n("./node_modules/react/index.js"),c=n("./node_modules/fast-deep-equal/index.js"),o=n.n(c);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var l=function(e,t){return(e%t+t)%t};l&&l===Object(l)&&Object.isExtensible(l)&&Object.defineProperty(l,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"mod",filename:"src/utils/index.js"}});var s={13:"Enter",27:"Escape",32:" ",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown"},b=function(e){return function(t){var n=t.key||s[t.keyCode];return e===n}};b&&b===Object(b)&&Object.isExtensible(b)&&Object.defineProperty(b,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"isKey",filename:"src/utils/index.js"}});var d=b("ArrowDown");"undefined"!==typeof d&&d&&d===Object(d)&&Object.isExtensible(d)&&Object.defineProperty(d,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"isArrowDown",filename:"src/utils/index.js"}});var f=b("ArrowUp");"undefined"!==typeof f&&f&&f===Object(f)&&Object.isExtensible(f)&&Object.defineProperty(f,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"isArrowUp",filename:"src/utils/index.js"}});var j=b("ArrowLeft");"undefined"!==typeof j&&j&&j===Object(j)&&Object.isExtensible(j)&&Object.defineProperty(j,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"isArrowLeft",filename:"src/utils/index.js"}});var O=b("ArrowRight");"undefined"!==typeof O&&O&&O===Object(O)&&Object.isExtensible(O)&&Object.defineProperty(O,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"isArrowRight",filename:"src/utils/index.js"}});var p=b("Enter");"undefined"!==typeof p&&p&&p===Object(p)&&Object.isExtensible(p)&&Object.defineProperty(p,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"isEnter",filename:"src/utils/index.js"}});var m=b("Escape");"undefined"!==typeof m&&m&&m===Object(m)&&Object.isExtensible(m)&&Object.defineProperty(m,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"isEscape",filename:"src/utils/index.js"}});var g=b(" ");"undefined"!==typeof g&&g&&g===Object(g)&&Object.isExtensible(g)&&Object.defineProperty(g,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"isSpace",filename:"src/utils/index.js"}});var y=function(e,t){return Object.keys(e).filter((function(e){return e!==t})).reduce((function(t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,Object(r.a)({},n,e[n]))}),{})};function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}y&&y===Object(y)&&Object.isExtensible(y)&&Object.defineProperty(y,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"filterOut",filename:"src/utils/index.js"}});var P=function(e){var t=e.initialValues,n=e.validate,c=e.onSubmit,u=e.submissionErrors,l=e.submitting,s=void 0!==l&&l,b=Object(a.useState)(t),d=Object(i.a)(b,2),f=d[0],j=d[1],O=Object(a.useState)(n?n(t):{}),p=Object(i.a)(O,2),m=p[0],g=p[1],v=Object(a.useState)({}),P=Object(i.a)(v,2),_=P[0],E=P[1],w=Object(a.useState)(void 0),x=Object(i.a)(w,2),C=x[0],D=x[1];Object(a.useEffect)((function(){u&&D(u)}),[u]);var N=Object(a.useCallback)((function(e){n&&g(n(e))}),[n]),k=Object(a.useMemo)((function(){return!!Object.keys(m).length}),[m]),L=Object(a.useMemo)((function(){return o()(t,f)}),[t,f]),R=Object(a.useCallback)((function(e){return{submitting:s,error:m[e],submissionError:C&&C[e],touched:!!_[e],value:f[e],onChange:function(t){var n=h({},f,Object(r.a)({},e,t.target.value));C&&D((function(t){return y(t,e)})),j(n),N(n)},onBlur:function(){E(h({},_,Object(r.a)({},e,!0)))}}}),[m,N,C,s,_,f]),q=Object(a.useCallback)((function(e){e.preventDefault(),!k&&c&&(C&&D(void 0),c(f))}),[k,c,C,f]),A=Object(a.useCallback)((function(){j(t),D(void 0),g({}),E({})}),[t]);return{getFieldProps:R,invalid:k,pristine:L,submitting:s,handleSubmit:q,resetForm:A}},_=P;function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}P&&P===Object(P)&&Object.isExtensible(P)&&Object.defineProperty(P,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useForm",filename:"src/useForm/useForm.js"}});var x=function(){var e=Object(a.useRef)([]).current,t=Object(a.useCallback)((function(t){return function(n){null===n?e.splice(t,1):e[t]=n}}),[e]),n=Object(a.useRef)([]).current,r=Object(a.useCallback)((function(e){return function(t){null===t?n.splice(e,1):n[e]=t}}),[n]),c=Object(a.useState)([]),o=Object(i.a)(c,2),u=o[0],s=o[1],b=Object(a.useCallback)((function(e){return u.includes(e)}),[u]),j=Object(a.useCallback)((function(e){var t=n[e],r={overflow:"hidden",transition:"height 200ms linear"};return t&&b(e)?w({},r,{height:"".concat(t.clientHeight,"px")}):w({},r,{height:"0px"})}),[b,n]),O=Object(a.useState)(-1),p=Object(i.a)(O,2),m=p[0],g=p[1],y=Object(a.useCallback)((function(e){return function(){g(e),function(e){s((function(t){return t.includes(e)?t.filter((function(t){return t!==e})):t.concat(e)}))}(e)}}),[]),v=Object(a.useCallback)((function(t){var n=e[t];n&&n.focus()}),[e]),h=function(e){return function(){return g(e)}},P=function(e){return"".concat(e,"-tab")},_=Object(a.useCallback)((function(t){var n=e.length;if(f(t)){t.preventDefault();var r=l(m-1,n);g(r),v(r)}else if(d(t)){t.preventDefault();var i=l(m+1,n);g(i),v(i)}}),[m,v,e]);return{getHeaderProps:Object(a.useCallback)((function(e,n){return{"aria-controls":P(e),"aria-disabled":b(n),"aria-expanded":b(n),id:e,key:e,onClick:y(n),onFocus:h(n),onKeyDown:_,ref:t(n)}}),[t,y,b,_]),getSectionProps:Object(a.useCallback)((function(e,t){return{"aria-hidden":!b(t),"aria-labelledby":e,id:P(e),key:P(e),ref:r(t),role:"region",style:j(t)}}),[r,j,b]),isActiveSection:b}},C=x;function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}x&&x===Object(x)&&Object.isExtensible(x)&&Object.defineProperty(x,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useAccordion",filename:"src/useAccordion/useAccordion.js"}});var k={loading:!1,initialLoad:!0,succeeded:!1,error:null,data:{}},L={LOADING:"".concat("useRequest","/LOADING"),SUCCEEDED:"".concat("useRequest","/SUCCEEDED"),FAILED:"".concat("useRequest","/FAILED"),FULFILLED:"".concat("useRequest","/FULFILLED")},R=function(){return{type:L.LOADING}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{data:e,type:L.SUCCEEDED}},A=function(e){return{error:e,type:L.FAILED}},S=function(){return{type:L.FULFILLED}},F=function(e,t){switch(t.type){case L.LOADING:return N({},e,{error:null,loading:!0,succeeded:!1});case L.SUCCEEDED:return N({},e,{loading:!1,succeeded:!0,initialLoad:!1,data:t.data});case L.FAILED:return N({},e,{loading:!1,initialLoad:!1,error:t.error});case L.FULFILLED:return N({},e,{loading:!1,initialLoad:!1});default:return e}},U=function(){var e=Object(a.useReducer)(F,k),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useMemo)((function(){return{loading:function(){return r(R())},succeeded:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(q(e))},failed:function(e){return r(A(e))},fulfilled:function(){return r(S())}}}),[]);return[Object(a.useMemo)((function(){return n}),[n]),c]},I=U;U&&U===Object(U)&&Object.isExtensible(U)&&Object.defineProperty(U,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useRequest",filename:"src/useRequest/useRequest.js"}});var M=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(a.useState)(e),n=Object(i.a)(t,2),r=n[0],c=n[1],o={toggle:function(){return c((function(e){return!e}))},toggleOn:function(){return c(!0)},toggleOff:function(){return c(!1)}},u=Object(a.useMemo)((function(){return[r,o]}),[o,r]);return u},T=M;M&&M===Object(M)&&Object.isExtensible(M)&&Object.defineProperty(M,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useToggle",filename:"src/useToggle/useToggle.js"}}),n.d(t,"b",(function(){return _})),n.d(t,"a",(function(){return C})),n.d(t,"c",(function(){return I})),n.d(t,"d",(function(){return T})),"undefined"!==typeof T&&T&&T===Object(T)&&Object.isExtensible(T)&&Object.defineProperty(T,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useToggle",filename:"src/index.js"}}),"undefined"!==typeof I&&I&&I===Object(I)&&Object.isExtensible(I)&&Object.defineProperty(I,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useRequest",filename:"src/index.js"}}),"undefined"!==typeof C&&C&&C===Object(C)&&Object.isExtensible(C)&&Object.defineProperty(C,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useAccordion",filename:"src/index.js"}}),"undefined"!==typeof _&&_&&_===Object(_)&&Object.isExtensible(_)&&Object.defineProperty(_,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useForm",filename:"src/index.js"}})},"./src/useRequest/useRequest.mdx":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return d}));var r,i=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/extends.js"),a=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),c=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=(n("./node_modules/react/index.js"),n("./node_modules/@mdx-js/react/dist/index.es.js")),u=n("./node_modules/docz/dist/index.esm.js"),l=n("./src/index.js"),s=(r="UseRequestDemo",{}),b="wrapper";function d(e){var t=e.components,n=Object(c.a)(e,["components"]);return Object(o.b)(b,Object(i.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h1",{id:"userequest"},"useRequest"),Object(o.b)("p",null,"useRequest is a hook that is designed to handle request state. It uses ",Object(o.b)("inlineCode",{parentName:"p"},"useReducer")," under the hood and returns state and three actions to update it."),Object(o.b)("h2",{id:"state"},"State"),Object(o.b)("p",null,"The return state has the following properties"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"loading"),Object(o.b)("li",{parentName:"ul"},"initialLoad"),Object(o.b)("li",{parentName:"ul"},"succeeded"),Object(o.b)("li",{parentName:"ul"},"error"),Object(o.b)("li",{parentName:"ul"},"data")),Object(o.b)("h2",{id:"actions"},"Actions"),Object(o.b)("h3",{id:"loading"},"loading"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"flips ",Object(o.b)("inlineCode",{parentName:"li"},"loading")," to ",Object(o.b)("inlineCode",{parentName:"li"},"true")),Object(o.b)("li",{parentName:"ul"},"flips ",Object(o.b)("inlineCode",{parentName:"li"},"succeeded")," to ",Object(o.b)("inlineCode",{parentName:"li"},"false")),Object(o.b)("li",{parentName:"ul"},"resets ",Object(o.b)("inlineCode",{parentName:"li"},"error")," to ",Object(o.b)("inlineCode",{parentName:"li"},"null"))),Object(o.b)("h3",{id:"succeeded"},"succeeded"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"flips ",Object(o.b)("inlineCode",{parentName:"li"},"loading")," to ",Object(o.b)("inlineCode",{parentName:"li"},"false")),Object(o.b)("li",{parentName:"ul"},"flips ",Object(o.b)("inlineCode",{parentName:"li"},"succeeded")," to ",Object(o.b)("inlineCode",{parentName:"li"},"true")),Object(o.b)("li",{parentName:"ul"},"flips ",Object(o.b)("inlineCode",{parentName:"li"},"initialLoad")," to ",Object(o.b)("inlineCode",{parentName:"li"},"false")),Object(o.b)("li",{parentName:"ul"},"populates ",Object(o.b)("inlineCode",{parentName:"li"},"data")," with the given argument")),Object(o.b)("h3",{id:"failed"},"failed"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"flips ",Object(o.b)("inlineCode",{parentName:"li"},"loading")," to ",Object(o.b)("inlineCode",{parentName:"li"},"false")),Object(o.b)("li",{parentName:"ul"},"flips ",Object(o.b)("inlineCode",{parentName:"li"},"initialLoad")," to ",Object(o.b)("inlineCode",{parentName:"li"},"false")),Object(o.b)("li",{parentName:"ul"},"populates ",Object(o.b)("inlineCode",{parentName:"li"},"error")," with the given argument")),Object(o.b)("h3",{id:"fulfilled"},"fulfilled"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"flips ",Object(o.b)("inlineCode",{parentName:"li"},"loading")," to ",Object(o.b)("inlineCode",{parentName:"li"},"false")),Object(o.b)("li",{parentName:"ul"},"flips ",Object(o.b)("inlineCode",{parentName:"li"},"initialLoad")," to ",Object(o.b)("inlineCode",{parentName:"li"},"false"))),Object(o.b)("h2",{id:"example"},"Example"),Object(o.b)(u.c,{__position:0,__code:"() => {\n  const UseRequestDemo = () => {\n    const [state, actions] = useRequest()\n    const mockRequest = () =>\n      new Promise((resolve, reject) => {\n        return setTimeout(() => {\n          Math.floor(Math.random() * 2) == 0\n            ? resolve({ response: 'success' })\n            : reject('oops!')\n        }, 1000)\n      })\n\n    const makeRequest = () => {\n      actions.loading()\n      mockRequest()\n        .then(response => actions.succeeded(response))\n        .catch(error => actions.failed(error))\n    }\n\n    return (\n      <div>\n        <button onClick={makeRequest}>make request</button>\n        {state.loading && <div>loading...</div>}\n        {Object.keys(state.data).length !== 0 && (\n          <div>response: {state.data.response}</div>\n        )}\n        {state.error && <div>error: {state.error}</div>}\n      </div>\n    )\n  }\n\n  return <UseRequestDemo />\n}",__scope:{props:this?this.props:n,Playground:u.c,useRequest:l.c},mdxType:"Playground"},(function(){return Object(o.b)((function(){var e=Object(l.c)(),t=Object(a.a)(e,2),n=t[0],r=t[1];return Object(o.b)("div",null,Object(o.b)("button",{onClick:function(){r.loading(),new Promise((function(e,t){return setTimeout((function(){0==Math.floor(2*Math.random())?e({response:"success"}):t("oops!")}),1e3)})).then((function(e){return r.succeeded(e)})).catch((function(e){return r.failed(e)}))}},"make request"),n.loading&&Object(o.b)("div",null,"loading..."),0!==Object.keys(n.data).length&&Object(o.b)("div",null,"response: ",n.data.response),n.error&&Object(o.b)("div",null,"error: ",n.error))}),{mdxType:"UseRequestDemo"})})))}d&&d===Object(d)&&Object.isExtensible(d)&&Object.defineProperty(d,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"src/useRequest/useRequest.mdx"}}),d.isMDXComponent=!0}}]);
//# sourceMappingURL=src-use-request-use-request.91f2b136509d2adba26a.js.map